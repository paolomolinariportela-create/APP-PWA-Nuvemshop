name: Sync to Google Drive
on:
  push:
    branches:
      - main  # Certifique-se de que sua branch principal se chama 'main'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      # PASSO 1: Criar o pacote do projeto ignorando lixo (venv, git, etc)
      - name: Zip Folder
        run: |
          zip -r projeto_nuvemshop.zip . -x ".git/*" ".github/*" "venv/*" "__pycache__/*" "*.zip"

      # PASSO 2: Upload para a pasta espec√≠fica do seu Drive
      - name: Upload to Google Drive
        uses: adityak74/google-drive-upload-git-action@main
        with:
          credentials: ${{ secrets.GDRIVE_CREDENTIALS }}
          filename: "projeto_nuvemshop.zip"
          folderId: ${{ secrets.GDRIVE_FOLDER_ID }}
          overwrite: "true"
